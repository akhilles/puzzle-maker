<html>
    <head>
        <title>Local Search Assignment</title>
        <style>
            table {
                border-collapse: collapse;
            }
            td {
                width: 20px;
                height: 23px;
                border: 1px solid black;
                text-align: center;
                font-size: 12px;
            }
        </style>
        <script lang="JavaScript">

            function getN() {
                var sel = document.getElementById("n");
                return sel.options[sel.selectedIndex].value;
            }

            function displayPuzzle(n, response) {
                console.log(response);
                var puzzle = JSON.parse(response);
                var cells = puzzle["Cells"];
                cells.push('G');
                var depthBFS = puzzle["DepthBFS"];
                createTable('puzzleTable', n, cells);
                createTable('depthTable', n, depthBFS);
                setIterations(puzzle['Iterations']);
                setSolution(puzzle['Fitness']);
            }

            function getGenAlgoPuzzle() {
                n = getN();
                var http = new XMLHttpRequest();
                http.onreadystatechange = function() {
                    if (http.readyState == 4 && http.status == 200) {
                        displayPuzzle(n, http.responseText);
                    }
                }
                http.open("GET", '/genalgo?n=' + n, true);
                http.send(null);
            }

            function createTable(div, n, items) {
                var table = document.createElement('table');
                var row = null;

                items.forEach(function(item, index) {
                    var rowNum = index / n;
                    var columnNum = index % n;

                    if (columnNum === 0) row = table.insertRow(rowNum);
                    var cell = row.insertCell(columnNum);
                    cell.innerHTML = item;
                });

                var div = document.getElementById(div);
                div.innerHTML = '';
                div.appendChild(table);
            }

            function setIterations(numIter) {
                var div = document.getElementById('iterations');
                div.innerHTML = 'iterations: ' + numIter;
            }

            function setSolution(solution) {
                var div = document.getElementById('solution');
                div.innerHTML = 'solution: ' + solution;
            }
        </script>
    </head>
    <body>
        <select name="n" id="n">
            <option selected value="5">5</option>
            <option value="7">7</option>
            <option value="9">9</option>
            <option value="11">11</option>
            <option value="20">20</option>
        </select>
        <button onclick="getGenAlgoPuzzle()">GEN ALGO</button>
        <button>HILL CLIMBING</button>
        <div id="iterations" style="margin-top:40px"></div>
        <div id="solution"></div>
        <div id="puzzleTable" style="margin-top:40px"></div>
        <div id="depthTable" style="margin-top:40px"></div>
    </body>
</html>
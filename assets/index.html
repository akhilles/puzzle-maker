<html>
    <head>
        <title>Local Search Assignment</title>
        <style>
            table {
                border-collapse: collapse;
            }
            td {
                width: 20px;
                height: 23px;
                border: 1px solid black;
                text-align: center;
                font-size: 12px;
            }
        </style>
        <script lang="JavaScript">
            window.onload = function(){
                var n = 11;
                getRandomPuzzle(n, function(response) {
                    console.log(response);
                    var puzzle = JSON.parse(response);
                    var cells = puzzle["Cells"];
                    cells.push('G');
                    var depthBFS = puzzle["DepthBFS"];
                    createTable('puzzleTable', n, cells);
                    createTable('depthTable', n, depthBFS);
                });
            }

            function getRandomPuzzle(n, callback) {
                var http = new XMLHttpRequest();
                http.onreadystatechange = function() {
                    if (http.readyState == 4 && http.status == 200) {
                        callback(http.responseText);
                    }
                }
                http.open("GET", '/random?n=' + n, true);
                http.send(null);
            }

            function createTable(div, n, items) {
                var table = document.createElement('table');
                var row = null;

                items.forEach(function(item, index) {
                    var rowNum = index / n;
                    var columnNum = index % n;

                    if (columnNum === 0) row = table.insertRow(rowNum);
                    var cell = row.insertCell(columnNum);
                    cell.innerHTML = item;
                });

                var div = document.getElementById(div);
                div.appendChild(table);
            }
        </script>
    </head>
    <body>
        <div id="puzzleTable"></div>
        <div id="depthTable" style="margin-top:40px"></div>
    </body>
</html>